(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3471],{51513:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(85893),i=t(27049),a=t(71577),o=t(92032),s=t(88335),c=t.n(s);function u(e){var n=e.name,t=e.text;return(0,r.jsx)("div",{className:c().outerContainer,children:(0,r.jsxs)("div",{className:c().innerContainer,children:[(0,r.jsxs)("div",{className:c().header,children:[n," is currently offline."]}),(0,r.jsx)(i.Z,{}),(0,r.jsx)("div",{children:t}),(0,r.jsx)("div",{className:c().footer,children:(0,r.jsxs)(a.Z,{type:"primary",onClick:function(){console.log("show notification modal")},children:[(0,r.jsx)(o.Z,{}),"Notify when Live"]})})]})})}},69357:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(85893),i=t(45938),a=t(46914),o=t(67294),s=t(99611),c=t(37970),u=t.n(c);function l(e){var n=(0,o.useState)(new Date)[1];(0,o.useEffect)((function(){var e=setInterval((function(){return n(new Date)}),1e3);return function(){clearInterval(e)}}),[]);var t,c=e.online,l=e.lastConnectTime,f=e.lastDisconnectTime,h=e.viewerCount,d="";if(c&&l){var y=function(e){var n=(0,a.Z)({start:e,end:new Date});return n.days>1?"".concat(n.days," days ").concat(n.hours," hours"):n.hours>=1?"".concat(n.hours," hours ").concat(n.minutes," minutes"):"".concat(n.minutes," minutes ").concat(n.seconds," seconds")}(new Date(l));d=c?"Live for  ".concat(y):"Offline",t=(0,r.jsxs)("span",{children:[(0,r.jsx)(s.Z,{})," ",h]})}else d="Offline",f&&(t="Last live ".concat((0,i.Z)(new Date(f))," ago."));return(0,r.jsxs)("div",{className:u().statusbar,children:[(0,r.jsx)("div",{children:d}),(0,r.jsx)("div",{children:t})]})}l.defaultProps={lastConnectTime:null,lastDisconnectTime:null}},90448:function(e,n,t){"use strict";t.d(n,{Z:function(){return $}});var r=t(34051),i=t.n(r),a=t(85893),o=t(67294),s=t(2804),c=t(49218),u=t(85215),l=t(67483),f=t.n(l);t(27901);var h=function(e){var n=o.useRef(null),t=o.useRef(null),r=e.options,i=e.onReady;return o.useEffect((function(){if(!t.current){var e=n.current,a=t.current=(0,u.Z)(e,r,(function(){return a.log("player is ready"),i&&i(a,u.Z)}));a.autoplay(r.autoplay),a.src(r.sources)}}),[r,n]),o.useEffect((function(){var e=t.current;return function(){e&&(e.dispose(),t.current=null)}}),[t]),(0,a.jsx)("div",{"data-vjs-player":!0,children:(0,a.jsx)("video",{ref:n,className:"video-js vjs-big-play-centered ".concat(f().player," vjs-owncast")})})};var d=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n=e.prototype;return n.start=function(){this.stop(),this.timer=setInterval((function(){!function(){try{fetch("/api/ping")}catch(e){console.error(e)}}()}),4e3)},n.stop=function(){clearInterval(this.timer)},e}();function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){p(e,n,t[n])}))}return e}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g={position:"absolute",width:"100%",height:"100%"};function b(e){var n=e.src,t=void 0===n?"":n,r=e.width,i=e.height,s=e.objectFit,c=void 0===s?"fill":s,u=e.duration,l=void 0===u?"1s":u,f=(0,o.useMemo)((function(){return{display:"inline-block",position:"relative",width:r,height:i}}),[r,i]),h=(0,o.useMemo)((function(){return[v({},g,{objectFit:c,opacity:0,transition:"opacity ".concat(l)}),v({},g,{objectFit:c,opacity:1,transition:"opacity ".concat(l)}),v({},g,{objectFit:c,opacity:0})]}),[c,l]),d=(0,o.useState)(0),y=d[0],p=d[1],b=(0,o.useState)(["",""]),w=b[0],k=b[1],j=t!==w[1]?t:"",x=function(){p((y+1)%3),k([w[1],j])};return(0,a.jsx)("span",{style:f,children:m(w).concat([j]).map((function(e,n){return""!==e&&(0,a.jsx)("img",{src:e,alt:"",style:h[n],onLoad:2===n?x:void 0},e)}))})}b.defaultProps={objectFit:"fill",duration:"3s"};var w=t(46431),k=t.n(w);function j(e){var n,t=e.online,r=e.initialSrc,i=e.src,s=(0,o.useState)(r),c=s[0],u=s[1],l=(0,o.useState)("0s"),f=l[0],h=l[1];return(0,o.useEffect)((function(){clearInterval(n),n=setInterval((function(){"0s"===f&&h("3s"),u("".concat(i,"?").concat(Date.now()))}),2e4)}),[]),(0,a.jsxs)("div",{className:k().poster,children:[!t&&(0,a.jsx)("img",{src:r,alt:"logo",height:"500vh"}),t&&(0,a.jsx)(b,{src:c,duration:f,objectFit:"contain",width:"100%",height:"500px"})]})}var x=t(72581),T=t(77371);function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function I(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e,n)||P(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,n){if(e){if("string"===typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(e,n):void 0}}var B=function(){function e(n,t){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=n,this.supportsDetailedMetrics=!1,this.hasPerformedInitialVariantChange=!1,this.clockSkewMs=0,this.segmentDownloadTime=[],this.bandwidthTracking=[],this.latencyTracking=[],this.errors=0,this.qualityVariantChanges=0,this.isBuffering=!1,this.bufferingDurationTimer=0,this.collectPlaybackMetricsTimer=0,this.videoJSReady=this.videoJSReady.bind(this),this.handlePlaying=this.handlePlaying.bind(this),this.handleBuffering=this.handleBuffering.bind(this),this.handleEnded=this.handleEnded.bind(this),this.handleError=this.handleError.bind(this),this.collectPlaybackMetrics=this.collectPlaybackMetrics.bind(this),this.handleNoLongerBuffering=this.handleNoLongerBuffering.bind(this),this.player.on("canplaythrough",this.handleNoLongerBuffering),this.player.on("error",this.handleError),this.player.on("stalled",this.handleBuffering),this.player.on("waiting",this.handleBuffering),this.player.on("playing",this.handlePlaying),this.player.on("ended",this.handleEnded);var i=t.xhr;t.Vhs.xhr=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(n[0].uri.match(".ts")){var a=r,o=new Date,s=n[1];n[1]=function(e,n,t){var r=(new Date).getTime()-o.getTime();a.trackSegmentDownloadTime(r),s(e,n,t)}}return i.apply(void 0,E(n))},this.videoJSReady(),setInterval((function(){r.send()}),1e4)}var n,t,r;return n=e,t=[{key:"setClockSkew",value:function(e){this.clockSkewMs=e}},{key:"videoJSReady",value:function(){var e=this,n=this.player.tech({IWillNotUseThisInPlugins:!0});this.supportsDetailedMetrics=!!n,n.on("usage",(function(n){"vhs-unknown-waiting"===n.name&&e.setIsBuffering(!0),"vhs-rendition-change-abr"===n.name&&e.incrementQualityVariantChanges()})),this.player.textTracks().addEventListener("cuechange",(function(){e.incrementQualityVariantChanges()}))}},{key:"handlePlaying",value:function(){var e=this;clearInterval(this.collectPlaybackMetricsTimer),this.collectPlaybackMetricsTimer=setInterval((function(){e.collectPlaybackMetrics()}),5e3)}},{key:"handleEnded",value:function(){clearInterval(this.collectPlaybackMetricsTimer)}},{key:"handleBuffering",value:function(){this.incrementErrorCount(1),this.setIsBuffering(!0)}},{key:"handleNoLongerBuffering",value:function(){this.setIsBuffering(!1)}},{key:"handleError",value:function(){this.incrementErrorCount(1)}},{key:"incrementErrorCount",value:function(e){this.errors+=e}},{key:"incrementQualityVariantChanges",value:function(){this.hasPerformedInitialVariantChange?this.qualityVariantChanges++:this.hasPerformedInitialVariantChange=!0}},{key:"setIsBuffering",value:function(e){var n=this;this.isBuffering=e,e?this.bufferingDurationTimer=setTimeout((function(){n.incrementErrorCount(1)}),500):clearTimeout(this.bufferingDurationTimer)}},{key:"trackSegmentDownloadTime",value:function(e){this.segmentDownloadTime.push(e)}},{key:"trackBandwidth",value:function(e){this.bandwidthTracking.push(e)}},{key:"trackLatency",value:function(e){this.latencyTracking.push(e)}},{key:"collectPlaybackMetrics",value:function(){var e=this.player.tech({IWillNotUseThisInPlugins:!0});if(e&&e.vhs&&!this.player.paused()&&2===this.player.networkState()){var n=e.vhs.systemBandwidth;this.trackBandwidth(n);try{var t=function(e){for(var n,t=e.vhs.playlists.media(),r=e.currentTime(),i=0,a=t.segments.length;i<a;i++)if(r<t.segments[i].end){n=t.segments[i];break}return n||(n=A(t.segments,1)[0]),n}(e);if(!t||!t.dateTimeObject)return;var r=t.dateTimeObject.getTime(),i=(new Date).getTime()+this.clockSkewMs-r;if(i<0||i/1e3>=40)return;this.trackLatency(i)}catch(a){console.warn(a)}}}},{key:"send",value:function(){var e,n=this;return(e=i().mark((function e(){var t,r,a,o,s,c,u,l,f,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.segmentDownloadTime.length){e.next=2;break}return e.abrupt("return");case 2:if(!n.player.paused()){e.next=4;break}return e.abrupt("return");case 4:return t=n.errors,n.supportsDetailedMetrics?(o=(a=function(e){return e.reduce((function(e,n){return e+n}),0)/e.length})(n.segmentDownloadTime)/1e3,s=Math.round(1e3*o)/1e3,c=a(n.bandwidthTracking)/1e3,u=Math.round(1e3*c)/1e3,l=a(n.latencyTracking)/1e3,f=Math.round(1e3*l)/1e3,r={bandwidth:u,latency:f,downloadDuration:s,errors:t+n.isBuffering?1:0,qualityVariantChanges:n.qualityVariantChanges}):r={errors:t+n.isBuffering?1:0},n.errors=0,n.qualityVariantChanges=0,n.segmentDownloadTime=[],n.bandwidthTracking=[],n.latencyTracking=[],h={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.prev=13,e.next=16,fetch("/api/metrics/playback",h);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(13),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[13,18]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){S(a,r,i,o,s,"next",e)}function s(e){S(a,r,i,o,s,"throw",e)}o(void 0)}))})()}}],t&&I(n.prototype,t),r&&I(n,r),e}(),O=B;function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function D(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,n,t){var r=this,i=n.getComponent("MenuItem"),a=n.getComponent("MenuButton"),o=new i(e,{selectable:!0});o.setAttribute("class","latency-toggle-item"),o.on("click",(function(){r.toggleLatencyCompensator()}));var s=n.extend(a,{constructor:function(){a.call(this,e)},createItems:function(){var n=e.tech({IWillNotUseThisInPlugins:!0}),r=new i(e,{selectable:!0,label:"Auto"}),a=t.map((function(t){var r=new i(e,{selectable:!0,label:t.name});return r.on("click",(function(){n?(n.vhs.representations().forEach((function(e,n){e.enabled(n===t.index)})),r.selected(!1)):console.warn("Invalid attempt to access null player tech")})),r}));r.on("click",(function(){n.vhs.representations().forEach((function(e){e.enabled(!0)})),r.selected(!1)}));return 1===t.length?[]:[r].concat(D(a))}}),c=e.tech({IWillNotUseThisInPlugins:!0});if(!(t.length<2)||c&&c.vhs){var u=new s;return u.addClass("vjs-quality-selector"),u}}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function V(e,n,t,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,i)}function L(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){V(a,r,i,o,s,"next",e)}function s(e){V(a,r,i,o,s,"throw",e)}o(void 0)}))}}function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z="/api/video/variants",F="owncast_volume",U=new d,q=null;function J(){return W.apply(this,arguments)}function W(){return(W=L(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,fetch(Z);case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function $(e){var n=o.useRef(null),t=e.source,r=e.online,u=R((0,s.FV)(T.We),2),l=u[0],f=u[1],d=(0,s.sJ)(T.g8),y=function(){(0,x.qQ)(F,n.current.muted()?0:n.current.volume())};(0,c.y1)("space",(function(){n.current.paused()?n.current.play():n.current.pause()}),{enableOnContentEditable:!1}),(0,c.y1)("f",(function(){n.current.isFullscreen()?n.current.exitFullscreen():n.current.requestFullscreen()}),{enableOnContentEditable:!1}),(0,c.y1)("m",(function(){n.current.muted()||0===n.current.volume()?n.current.volume(.7):n.current.volume(0)}),{enableOnContentEditable:!1}),(0,c.y1)("0",(function(){return n.current.volume(n.current.volume()+.1)}),{enableOnContentEditable:!1}),(0,c.y1)("9",(function(){return n.current.volume(n.current.volume()-.1)}),{enableOnContentEditable:!1});var p={autoplay:!1,controls:!0,responsive:!0,fluid:!1,playsInline:!0,liveui:!0,preload:"auto",controlBar:{progressControl:{seekBar:!1}},html5:{vhs:{enableLowInitialPlaylist:!0,experimentalBufferBasedABR:!0,useNetworkInformationApi:!0,maxPlaylistRetries:30}},liveTracker:{trackingThreshold:0,liveTolerance:15},sources:[{src:t,type:"application/x-mpegURL"}]};return(0,o.useEffect)((function(){q&&q.setClockSkew(d)}),[d]),(0,a.jsxs)("div",{style:{display:"grid"},children:[r&&(0,a.jsx)("div",{style:{gridColumn:1,gridRow:1},children:(0,a.jsx)(h,{options:p,onReady:function(e,t){n.current=e,function(){try{n.current.volume((0,x.$o)(F)||1)}catch(e){console.warn(e)}}(),e.on("waiting",(function(){e.log("player is waiting")})),e.on("dispose",(function(){e.log("player will dispose"),U.stop()})),e.on("playing",(function(){e.log("player is playing"),U.start(),f(!0)})),e.on("pause",(function(){e.log("player is paused"),U.stop(),f(!1)})),e.on("ended",(function(){e.log("player is ended"),U.stop(),f(!1)})),t.hookOnce(),e.on("volumechange",y),(q=new O(e,t)).setClockSkew(d);var r=function(){var n=L(i().mark((function n(){var r,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,J();case 2:r=n.sent,a=M(e,t,r),e.controlBar.addChild(a,{},e.controlBar.children_.length-2);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();r()}})}),(0,a.jsx)("div",{style:{gridColumn:1,gridRow:1},children:!l&&(0,a.jsx)(j,{online:r,initialSrc:"/logo",src:"/thumbnail.jpg"})})]})}},88335:function(e){e.exports={outerContainer:"OfflineBanner_outerContainer__3AbsB",innerContainer:"OfflineBanner_innerContainer__zTm13",header:"OfflineBanner_header__Vu20o",footer:"OfflineBanner_footer__o3Zl5"}},37970:function(e){e.exports={statusbar:"Statusbar_statusbar__AtVnB"}},67483:function(e){e.exports={player:"Player_player__6VqUk"}},46431:function(e){e.exports={poster:"VideoPoster_poster__YgWm_"}},25893:function(){}}]);