(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var r=e(1413),o=e(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},a=e(42135),u=function(t,n){return o.createElement(a.Z,(0,r.Z)((0,r.Z)({},t),{},{ref:n,icon:i}))};u.displayName="DeleteOutlined";var c=o.forwardRef(u)},27561:function(t,n,e){var r=e(67990),o=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(o,""):t}},67990:function(t){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},23279:function(t,n,e){var r=e(13218),o=e(7771),i=e(14841),a=Math.max,u=Math.min;t.exports=function(t,n,e){var c,l,s,f,d,p,h=0,v=!1,x=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(n){var e=c,r=l;return c=l=void 0,h=n,f=t.apply(r,e)}function g(t){return h=t,d=setTimeout(j,n),v?m(t):f}function b(t){var e=t-p;return void 0===p||e>=n||e<0||x&&t-h>=s}function j(){var t=o();if(b(t))return Z(t);d=setTimeout(j,function(t){var e=n-(t-p);return x?u(e,s-(t-h)):e}(t))}function Z(t){return d=void 0,y&&c?m(t):(c=l=void 0,f)}function w(){var t=o(),e=b(t);if(c=arguments,l=this,p=t,e){if(void 0===d)return g(p);if(x)return clearTimeout(d),d=setTimeout(j,n),m(p)}return void 0===d&&(d=setTimeout(j,n)),f}return n=i(n)||0,r(e)&&(v=!!e.leading,s=(x="maxWait"in e)?a(i(e.maxWait)||0,n):s,y="trailing"in e?!!e.trailing:y),w.cancel=function(){void 0!==d&&clearTimeout(d),h=0,c=p=l=d=void 0},w.flush=function(){return void 0===d?f:Z(o())},w}},33448:function(t,n,e){var r=e(44239),o=e(37005);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},7771:function(t,n,e){var r=e(55639);t.exports=function(){return r.Date.now()}},14841:function(t,n,e){var r=e(27561),o=e(13218),i=e(33448),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(o(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=o(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var e=u.test(t);return e||c.test(t)?l(t.slice(2),e?2:8):a.test(t)?NaN:+t}},54005:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return e(4437)}])},4437:function(t,n,e){"use strict";e.r(n);var r=e(47568),o=e(29815),i=e(70655),a=e(85893),u=e(48689),c=e(84485),l=e(85402),s=e(69677),f=e(32808),d=e(26713),p=e(71577),h=e(93626),v=e(67294),x=e(25521),y=e(25964),m=e(83192),g=e(35159),b=e(19411),j=c.Z.Title,Z=c.Z.Paragraph,w=null,k=function(t){var n=t.onOk,e=t.onCancel,r=t.visible,o=(0,v.useState)(""),i=o[0],u=o[1],c=(0,v.useState)(""),d=c[0],p=c[1],h=(0,v.useState)(""),x=h[0],y=h[1],m=(0,v.useState)(""),g=m[0],j=m[1],Z=(0,v.useState)(""),w=Z[0],k=Z[1],C=(0,v.useState)(!1),T=C[0],S=C[1],_={disabled:!function(){try{if("https:"!==new URL(i).protocol)return!1}catch(t){return!1}return(0,b.Z)(i)&&""!==d}()};return(0,a.jsx)(l.Z,{title:"Create New Action",visible:r,onOk:function(){n(i,d,x,g,w,T),u(""),p(""),y(""),j(""),k(""),S(!1)},onCancel:e,okButtonProps:_,children:(0,a.jsxs)("div",{children:["Add the URL for the external action you want to present."," ",(0,a.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:i,required:!0,placeholder:"https://myserver.com/action (required)",onChange:function(t){return u(t.currentTarget.value.trim())},type:"url",pattern:b.a})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:d,required:!0,placeholder:"Your action title (required)",onChange:function(t){return p(t.currentTarget.value)}})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:x,placeholder:"Optional description",onChange:function(t){return y(t.currentTarget.value)}})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:g,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:function(t){return j(t.currentTarget.value)}})}),(0,a.jsxs)("p",{children:[(0,a.jsx)(s.Z,{type:"color",value:w,onChange:function(t){return k(t.currentTarget.value)}}),"Optional background color of the action button."]}),(0,a.jsx)(f.Z,{checked:T,defaultChecked:T,onChange:function(t){S(t.target.checked)},children:"Open in a new tab instead of within your page."})]})})};n.default=function(){var t=(0,v.useContext)(g.aC)||{},n=t.serverConfig,e=t.setFieldInConfigState,c=n.externalActions,l=(0,v.useState)([]),s=l[0],f=l[1],b=(0,v.useState)(!1),C=b[0],T=b[1],S=(0,v.useState)(null),_=S[0],I=S[1],E=function(){I(null),w=null,clearTimeout(w)};function O(t){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,y.Si)({apiPath:y.os,data:{value:t},onSuccess:function(){e({fieldName:"externalActions",value:t,path:""}),I((0,m.kg)(m.zv,"Updated.")),w=setTimeout(E,y.sI)},onError:function(t){console.log(t),I((0,m.kg)(m.Un,t)),w=setTimeout(E,y.sI)}})];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function N(){return(N=(0,r.Z)((function(t){var n,e;return(0,i.__generator)(this,(function(r){n=(0,o.Z)(s),e=s.findIndex((function(n){return n.url===t.url})),n.splice(e,1);try{f(n),O(n)}catch(i){console.error(i)}return[2]}))}))).apply(this,arguments)}function U(){return(U=(0,r.Z)((function(t,n,e,r,a,u){var c,l,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),c=(0,o.Z)(s),l=c.concat({url:t,title:n,description:e,icon:r,color:a,openExternally:u}),f(l),[4,O(l)];case 1:return i.sent(),[3,3];case 2:return d=i.sent(),console.error(d),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}(0,v.useEffect)((function(){f(c||[])}),[c]);var R=[{title:"",key:"delete",render:function(t,n){return(0,a.jsx)(d.Z,{size:"middle",children:(0,a.jsx)(p.Z,{onClick:function(){return function(t){return N.apply(this,arguments)}(n)},icon:(0,a.jsx)(u.Z,{})})})}},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:function(t){return t?(0,a.jsx)("img",{style:{width:"2vw"},src:t,alt:""}):null}},{title:"Color",dataIndex:"color",key:"color",render:function(t){return t?(0,a.jsx)("div",{style:{backgroundColor:t,height:"30px"},children:t}):null}},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:function(t){return t?"In a new tab":"In a modal"}}];return(0,a.jsxs)("div",{children:[(0,a.jsx)(j,{children:"External Actions"}),(0,a.jsx)(Z,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,a.jsxs)(Z,{children:["Read more about how to use actions, with examples, at"," ",(0,a.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,a.jsx)(h.Z,{rowKey:function(t){return"".concat(t.title,"-").concat(t.url)},columns:R,dataSource:s,pagination:!1}),(0,a.jsx)("br",{}),(0,a.jsx)(p.Z,{type:"primary",onClick:function(){T(!0)},children:"Create New Action"}),(0,a.jsx)(x.E,{status:_}),(0,a.jsx)(k,{visible:C,onOk:function(t,n,e,r,o,i){T(!1),function(t,n,e,r,o,i){U.apply(this,arguments)}(t,n,e,r,o,i)},onCancel:function(){T(!1)}})]})}},20943:function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}e.d(n,{Z:function(){return r}})},13375:function(t,n,e){"use strict";function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}e.d(n,{Z:function(){return r}})},29815:function(t,n,e){"use strict";e.d(n,{Z:function(){return a}});var r=e(20943);var o=e(13375);var i=e(91566);function a(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||(0,o.Z)(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91566:function(t,n,e){"use strict";e.d(n,{Z:function(){return o}});var r=e(20943);function o(t,n){if(t){if("string"===typeof t)return(0,r.Z)(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?(0,r.Z)(t,n):void 0}}}},function(t){t.O(0,[8939,3903,4267,3626,9774,2888,179],(function(){return n=54005,t(t.s=n);var n}));var n=t.O();_N_E=n}]);