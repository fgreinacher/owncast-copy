(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{24093:function(e,t,n){"use strict";n.d(t,{C:function(){return S}});var r=n(87462),a=n(4942),i=n(71002),o=n(97685),c=n(94184),s=n.n(c),u=n(48555),l=n(42550),f=n(67294),d=n(53124),m=n(25378),p=n(24308),h=f.createContext("default"),v=function(e){var t=e.children,n=e.size;return f.createElement(h.Consumer,null,(function(e){return f.createElement(h.Provider,{value:n||e},t)}))},g=h,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},x=function(e,t){var n,c,h=f.useContext(g),v=f.useState(1),x=(0,o.Z)(v,2),w=x[0],Z=x[1],b=f.useState(!1),k=(0,o.Z)(b,2),j=k[0],E=k[1],S=f.useState(!0),C=(0,o.Z)(S,2),O=C[0],T=C[1],_=f.useRef(null),N=f.useRef(null),z=(0,l.sQ)(t,_),I=f.useContext(d.E_).getPrefixCls,P=function(){if(N.current&&_.current){var t=N.current.offsetWidth,n=_.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,a=void 0===r?4:r;2*a<n&&Z(n-2*a<t?(n-2*a)/t:1)}}};f.useEffect((function(){E(!0)}),[]),f.useEffect((function(){T(!0),Z(1)}),[e.src]),f.useEffect((function(){P()}),[e.gap]);var A,D=e.prefixCls,R=e.shape,F=void 0===R?"circle":R,M=e.size,Q=void 0===M?"default":M,q=e.src,H=e.srcSet,W=e.icon,B=e.className,U=e.alt,$=e.draggable,X=e.children,K=e.crossOrigin,Y=y(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),G="default"===Q?h:Q,L=Object.keys("object"===(0,i.Z)(G)&&G||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),V=(0,m.Z)(L),J=f.useMemo((function(){if("object"!==(0,i.Z)(G))return{};var e=p.c4.find((function(e){return V[e]})),t=G[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:W?t/2:18}:{}}),[V,G]),ee=I("avatar",D),te=s()((n={},(0,a.Z)(n,"".concat(ee,"-lg"),"large"===G),(0,a.Z)(n,"".concat(ee,"-sm"),"small"===G),n)),ne=f.isValidElement(q),re=s()(ee,te,(c={},(0,a.Z)(c,"".concat(ee,"-").concat(F),!!F),(0,a.Z)(c,"".concat(ee,"-image"),ne||q&&O),(0,a.Z)(c,"".concat(ee,"-icon"),!!W),c),B),ae="number"===typeof G?{width:G,height:G,lineHeight:"".concat(G,"px"),fontSize:W?G/2:18}:{};if("string"===typeof q&&O)A=f.createElement("img",{src:q,draggable:$,srcSet:H,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&T(!1)},alt:U,crossOrigin:K});else if(ne)A=q;else if(W)A=W;else if(j||1!==w){var ie="scale(".concat(w,") translateX(-50%)"),oe={msTransform:ie,WebkitTransform:ie,transform:ie},ce="number"===typeof G?{lineHeight:"".concat(G,"px")}:{};A=f.createElement(u.default,{onResize:P},f.createElement("span",{className:"".concat(ee,"-string"),ref:N,style:(0,r.Z)((0,r.Z)({},ce),oe)},X))}else A=f.createElement("span",{className:"".concat(ee,"-string"),style:{opacity:0},ref:N},X);return delete Y.onError,delete Y.gap,f.createElement("span",(0,r.Z)({},Y,{style:(0,r.Z)((0,r.Z)((0,r.Z)({},ae),J),Y.style),className:re,ref:z}),A)};var w=f.forwardRef(x),Z=n(50344),b=n(55241),k=n(96159),j=function(e){var t=f.useContext(d.E_),n=t.getPrefixCls,r=t.direction,i=e.prefixCls,o=e.className,c=void 0===o?"":o,u=e.maxCount,l=e.maxStyle,m=e.size,p=n("avatar-group",i),h=s()(p,(0,a.Z)({},"".concat(p,"-rtl"),"rtl"===r),c),g=e.children,y=e.maxPopoverPlacement,x=void 0===y?"top":y,j=e.maxPopoverTrigger,E=void 0===j?"hover":j,S=(0,Z.Z)(g).map((function(e,t){return(0,k.Tm)(e,{key:"avatar-key-".concat(t)})})),C=S.length;if(u&&u<C){var O=S.slice(0,u),T=S.slice(u,C);return O.push(f.createElement(b.Z,{key:"avatar-popover-key",content:T,trigger:E,placement:x,overlayClassName:"".concat(p,"-popover")},f.createElement(w,{style:l},"+".concat(C-u)))),f.createElement(v,{size:m},f.createElement("div",{className:h,style:e.style},O))}return f.createElement(v,{size:m},f.createElement("div",{className:h,style:e.style},S))},E=w;E.Group=j;var S=E},27561:function(e,t,n){var r=n(67990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var r=n(13218),a=n(7771),i=n(14841),o=Math.max,c=Math.min;e.exports=function(e,t,n){var s,u,l,f,d,m,p=0,h=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=s,r=u;return s=u=void 0,p=t,f=e.apply(r,n)}function x(e){return p=e,d=setTimeout(Z,t),h?y(e):f}function w(e){var n=e-m;return void 0===m||n>=t||n<0||v&&e-p>=l}function Z(){var e=a();if(w(e))return b(e);d=setTimeout(Z,function(e){var n=t-(e-m);return v?c(n,l-(e-p)):n}(e))}function b(e){return d=void 0,g&&s?y(e):(s=u=void 0,f)}function k(){var e=a(),n=w(e);if(s=arguments,u=this,m=e,n){if(void 0===d)return x(m);if(v)return clearTimeout(d),d=setTimeout(Z,t),y(m)}return void 0===d&&(d=setTimeout(Z,t)),f}return t=i(t)||0,r(n)&&(h=!!n.leading,l=(v="maxWait"in n)?o(i(n.maxWait)||0,t):l,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==d&&clearTimeout(d),p=0,s=m=u=d=void 0},k.flush=function(){return void 0===d?f:b(a())},k}},33448:function(e,t,n){var r=n(44239),a=n(37005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},7771:function(e,t,n){var r=n(55639);e.exports=function(){return r.Date.now()}},14841:function(e,t,n){var r=n(27561),a=n(13218),i=n(33448),o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}},89675:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/federation/followers",function(){return n(72301)}])},72301:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(47568),a=n(29815),i=n(70655),o=n(85893),c=n(67294),s=n(93626),u=n(24093),l=n(71577),f=n(2944),d=n(58091),m=n(1413),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},h=n(42135),v=function(e,t){return c.createElement(h.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:p}))};v.displayName="UserAddOutlined";var g=c.forwardRef(v),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},x=function(e,t){return c.createElement(h.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:y}))};x.displayName="UserDeleteOutlined";var w=c.forwardRef(x),Z=n(35159),b=n(58827),k=n(2766);function j(){var e=function(e,t){return(0,o.jsx)(s.Z,{dataSource:e,columns:t,size:"small",rowKey:function(e){return e.link},pagination:{pageSize:50,hideOnSinglePage:!0,showSizeChanger:!1,total:S},onChange:function(e){var t=e.current;_(t)}})},t=(0,c.useState)([]),n=t[0],m=t[1],p=(0,c.useState)([]),h=p[0],v=p[1],y=(0,c.useState)([]),x=y[0],j=y[1],E=(0,c.useState)(0),S=E[0],C=E[1],O=(0,c.useState)(0),T=O[0],_=O[1],N=((0,c.useContext)(Z.aC)||{}).serverConfig.federation.isPrivate,z=function(){var e=(0,r.Z)((function(){var e,t,n,r,a,o,c,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),50,e=50*T,t="".concat(b.HP,"?offset=").concat(e,"&limit=").concat(50),[4,(0,b.rQ)(t,{auth:!0})];case 1:return n=i.sent(),r=n.results,a=n.total,(0,k.Qr)(r)?j([]):(C(a),j(r)),[4,(0,b.rQ)(b.E8,{auth:!0})];case 2:return o=i.sent(),(0,k.Qr)(o)?m([]):m(o),[4,(0,b.rQ)(b.Y9,{auth:!0})];case 3:return c=i.sent(),(0,k.Qr)(h)?v([]):v(c),[3,5];case 4:return s=i.sent(),console.log("==== error",s),[3,5];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){z()}),[]);var I=[{title:"",dataIndex:"image",key:"image",width:90,render:function(e){return(0,o.jsx)(u.C,{size:40,src:e||"/img/logo.svg"})}},{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return(0,o.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.name||t.username})}},{title:"URL",dataIndex:"link",key:"link",render:function(e,t){return(0,o.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.link})}}];function P(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(e){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,b.rQ)(b.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!0}})];case 1:return n.sent(),z(),[3,3];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}function D(e){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)((function(e){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,b.rQ)(b.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!1}})];case 1:return n.sent(),z(),[3,3];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}var F=(0,a.Z)(I);F.unshift({title:"Approve",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(l.Z,{type:"primary",icon:(0,o.jsx)(g,{}),onClick:function(){P(e)}})},width:50},{title:"Reject",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(l.Z,{type:"primary",danger:!0,icon:(0,o.jsx)(w,{}),onClick:function(){D(e)}})},width:50}),F.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,d.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"});var M=(0,a.Z)(I);M.unshift({title:"Approve",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(l.Z,{type:"primary",icon:(0,o.jsx)(g,{}),size:"large",onClick:function(){P(e)}})},width:50}),M.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,d.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Rejected/Blocked",dataIndex:"timestamp",key:"disabled_at",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,d.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"});var Q=(0,a.Z)(I);Q.push({title:"Added",dataIndex:"timestamp",key:"timestamp",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,d.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Remove",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(l.Z,{type:"primary",danger:!0,icon:(0,o.jsx)(w,{}),onClick:function(){D(e)}})},width:50});var q=(0,o.jsxs)("span",{children:["Followers ",x.length>0&&"(".concat(x.length,")")]}),H=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:"The following accounts get notified when you go live or send a post."}),e(x,Q)," "]}),W=(0,o.jsxs)("span",{children:["Requests ",n.length>0&&"(".concat(n.length,")")]}),B=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{children:["The following people are requesting to follow your Owncast server on the"," ",(0,o.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",target:"_blank",rel:"noopener noreferrer",children:"Fediverse"})," ","and be alerted to when you go live. Each must be approved."]}),e(n,F)]}),U=[{label:q,key:"1",children:H},N&&{label:W,key:"2",children:B},{label:(0,o.jsxs)("span",{children:["Blocked ",h.length>0&&"(".concat(h.length,")")]}),key:"3",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:"The following people were either rejected or blocked by you. You can approve them as a follower."}),(0,o.jsx)("p",{children:e(h,M)})]})}];return(0,o.jsx)("div",{className:"followers-section",children:(0,o.jsx)(f.Z,{defaultActiveKey:"1",items:U})})}},20943:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},13375:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},29815:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(20943);var a=n(13375);var i=n(91566);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91566:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(20943);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[8939,3903,4267,3626,8091,2944,9774,2888,179],(function(){return t=89675,e(e.s=t);var t}));var t=e.O();_N_E=t}]);