(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{27279:function(e,n,t){"use strict";t.d(n,{Z:function(){return A}});var a=t(87462),r=t(4942),i=t(67294),c=t(93433),o=t(15671),s=t(43144),l=t(60136),d=t(31129),u=t(71002),p=t(94184),f=t.n(p),v=t(96774),h=t.n(v),m=t(50344),g=t(60444),y=t(29439),b=i.forwardRef((function(e,n){var t,a=e.prefixCls,c=e.forceRender,o=e.className,s=e.style,l=e.children,d=e.isActive,u=e.role,p=i.useState(d||c),v=(0,y.Z)(p,2),h=v[0],m=v[1];return i.useEffect((function(){(c||d)&&m(!0)}),[c,d]),h?i.createElement("div",{ref:n,className:f()("".concat(a,"-content"),(t={},(0,r.Z)(t,"".concat(a,"-content-active"),d),(0,r.Z)(t,"".concat(a,"-content-inactive"),!d),t),o),style:s,role:u},i.createElement("div",{className:"".concat(a,"-content-box")},l)):null}));b.displayName="PanelContent";var C=b,x=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(){var e;return(0,o.Z)(this,t),(e=n.apply(this,arguments)).handleItemClick=function(){var n=e.props,t=n.onItemClick,a=n.panelKey;"function"===typeof t&&t(a)},e.handleKeyPress=function(n){"Enter"!==n.key&&13!==n.keyCode&&13!==n.which||e.handleItemClick()},e}return(0,s.Z)(t,[{key:"shouldComponentUpdate",value:function(e){return!h()(this.props,e)}},{key:"render",value:function(){var e,n,t=this,c=this.props,o=c.className,s=c.id,l=c.style,d=c.prefixCls,u=c.header,p=c.headerClass,v=c.children,h=c.isActive,m=c.showArrow,y=c.destroyInactivePanel,b=c.accordion,x=c.forceRender,Z=c.openMotion,k=c.expandIcon,N=c.extra,w=c.collapsible,j="disabled"===w,P=f()("".concat(d,"-header"),(e={},(0,r.Z)(e,p,p),(0,r.Z)(e,"".concat(d,"-header-collapsible-only"),"header"===w),e)),E=f()((n={},(0,r.Z)(n,"".concat(d,"-item"),!0),(0,r.Z)(n,"".concat(d,"-item-active"),h),(0,r.Z)(n,"".concat(d,"-item-disabled"),j),n),o),O=i.createElement("i",{className:"arrow"});return m&&"function"===typeof k&&(O=k(this.props)),i.createElement("div",{className:E,style:l,id:s},i.createElement("div",{className:P,onClick:function(){return"header"!==w&&t.handleItemClick()},role:b?"tab":"button",tabIndex:j?-1:0,"aria-expanded":h,onKeyPress:this.handleKeyPress},m&&O,"header"===w?i.createElement("span",{onClick:this.handleItemClick,className:"".concat(d,"-header-text")},u):u,N&&i.createElement("div",{className:"".concat(d,"-extra")},N)),i.createElement(g.Z,(0,a.Z)({visible:h,leavedClassName:"".concat(d,"-content-hidden")},Z,{forceRender:x,removeOnLeave:y}),(function(e,n){var t=e.className,a=e.style;return i.createElement(C,{ref:n,prefixCls:d,className:t,style:a,isActive:h,forceRender:x,role:b?"tabpanel":null},v)})))}}]),t}(i.Component);x.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var Z=x;function k(e){var n=e;if(!Array.isArray(n)){var t=(0,u.Z)(n);n="number"===t||"string"===t?[n]:[]}return n.map((function(e){return String(e)}))}var N=function(e){(0,l.Z)(t,e);var n=(0,d.Z)(t);function t(e){var a;(0,o.Z)(this,t),(a=n.call(this,e)).onClickItem=function(e){var n=a.state.activeKey;if(a.props.accordion)n=n[0]===e?[]:[e];else{var t=(n=(0,c.Z)(n)).indexOf(e);t>-1?n.splice(t,1):n.push(e)}a.setActiveKey(n)},a.getNewChild=function(e,n){if(!e)return null;var t=a.state.activeKey,r=a.props,c=r.prefixCls,o=r.openMotion,s=r.accordion,l=r.destroyInactivePanel,d=r.expandIcon,u=r.collapsible,p=e.key||String(n),f=e.props,v=f.header,h=f.headerClass,m=f.destroyInactivePanel,g=f.collapsible,y=null!==g&&void 0!==g?g:u,b={key:p,panelKey:p,header:v,headerClass:h,isActive:s?t[0]===p:t.indexOf(p)>-1,prefixCls:c,destroyInactivePanel:null!==m&&void 0!==m?m:l,openMotion:o,accordion:s,children:e.props.children,onItemClick:"disabled"===y?null:a.onClickItem,expandIcon:d,collapsible:y};return"string"===typeof e.type?e:i.cloneElement(e,b)},a.getItems=function(){var e=a.props.children;return(0,m.Z)(e).map(a.getNewChild)},a.setActiveKey=function(e){"activeKey"in a.props||a.setState({activeKey:e}),a.props.onChange(a.props.accordion?e[0]:e)};var r=e.activeKey,s=e.defaultActiveKey;return"activeKey"in e&&(s=r),a.state={activeKey:k(s)},a}return(0,s.Z)(t,[{key:"shouldComponentUpdate",value:function(e,n){return!h()(this.props,e)||!h()(this.state,n)}},{key:"render",value:function(){var e,n=this.props,t=n.prefixCls,a=n.className,c=n.style,o=n.accordion,s=f()((e={},(0,r.Z)(e,t,!0),(0,r.Z)(e,a,!!a),e));return i.createElement("div",{className:s,style:c,role:o?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var n={};return"activeKey"in e&&(n.activeKey=k(e.activeKey)),n}}]),t}(i.Component);N.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},N.Panel=Z;var w=N,j=(N.Panel,t(8812)),P=t(98423),E=t(65632),O=t(21687),I=function(e){(0,O.Z)(!("disabled"in e),"Collapse.Panel",'`disabled` is deprecated. Please use `collapsible="disabled"` instead.');var n=i.useContext(E.E_).getPrefixCls,t=e.prefixCls,c=e.className,o=void 0===c?"":c,s=e.showArrow,l=void 0===s||s,d=n("collapse",t),u=f()((0,r.Z)({},"".concat(d,"-no-arrow"),!l),o);return i.createElement(w.Panel,(0,a.Z)({},e,{prefixCls:d,className:u}))},S=t(33603),K=t(96159),_=function(e){var n,t=i.useContext(E.E_),c=t.getPrefixCls,o=t.direction,s=e.prefixCls,l=e.className,d=void 0===l?"":l,u=e.bordered,p=void 0===u||u,v=e.ghost,h=c("collapse",s),g=function(){var n=e.expandIconPosition;return void 0!==n?n:"rtl"===o?"right":"left"}(),y=f()((n={},(0,r.Z)(n,"".concat(h,"-borderless"),!p),(0,r.Z)(n,"".concat(h,"-icon-position-").concat(g),!0),(0,r.Z)(n,"".concat(h,"-rtl"),"rtl"===o),(0,r.Z)(n,"".concat(h,"-ghost"),!!v),n),d),b=(0,a.Z)((0,a.Z)({},S.Z),{motionAppear:!1,leavedClassName:"".concat(h,"-content-hidden")});return i.createElement(w,(0,a.Z)({openMotion:b},e,{expandIcon:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expandIcon,a=t?t(n):i.createElement(j.Z,{rotate:n.isActive?90:void 0});return(0,K.Tm)(a,(function(){return{className:f()(a.props.className,"".concat(h,"-arrow"))}}))},prefixCls:h,className:y}),function(){var n=e.children;return(0,m.Z)(n).map((function(e,n){var t;if(null===(t=e.props)||void 0===t?void 0:t.disabled){var r=e.key||String(n),i=e.props,c=i.disabled,o=i.collapsible,s=(0,a.Z)((0,a.Z)({},(0,P.Z)(e.props,["disabled"])),{key:r,collapsible:null!==o&&void 0!==o?o:c?"disabled":void 0});return(0,K.Tm)(e,s)}return e}))}())};_.Panel=I;var A=_},12028:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var a=t(87462),r=t(4942),i=t(67294),c=t(29439),o=t(44925),s=t(94184),l=t.n(s),d=t(21770),u=t(15105),p=i.forwardRef((function(e,n){var t,a=e.prefixCls,s=void 0===a?"rc-switch":a,p=e.className,f=e.checked,v=e.defaultChecked,h=e.disabled,m=e.loadingIcon,g=e.checkedChildren,y=e.unCheckedChildren,b=e.onClick,C=e.onChange,x=e.onKeyDown,Z=(0,o.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),k=(0,d.Z)(!1,{value:f,defaultValue:v}),N=(0,c.Z)(k,2),w=N[0],j=N[1];function P(e,n){var t=w;return h||(j(t=e),null===C||void 0===C||C(t,n)),t}var E=l()(s,p,(t={},(0,r.Z)(t,"".concat(s,"-checked"),w),(0,r.Z)(t,"".concat(s,"-disabled"),h),t));return i.createElement("button",Object.assign({},Z,{type:"button",role:"switch","aria-checked":w,disabled:h,className:E,ref:n,onKeyDown:function(e){e.which===u.Z.LEFT?P(!1,e):e.which===u.Z.RIGHT&&P(!0,e),null===x||void 0===x||x(e)},onClick:function(e){var n=P(!w,e);null===b||void 0===b||b(n,e)}}),m,i.createElement("span",{className:"".concat(s,"-inner")},w?g:y))}));p.displayName="Switch";var f=p,v=t(7085),h=t(97202),m=t(65632),g=t(97647),y=t(21687),b=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},C=i.forwardRef((function(e,n){var t,c=e.prefixCls,o=e.size,s=e.loading,d=e.className,u=void 0===d?"":d,p=e.disabled,C=b(e,["prefixCls","size","loading","className","disabled"]);(0,y.Z)("checked"in C||!("value"in C),"Switch","`value` is not a valid prop, do you mean `checked`?");var x=i.useContext(m.E_),Z=x.getPrefixCls,k=x.direction,N=i.useContext(g.Z),w=Z("switch",c),j=i.createElement("div",{className:"".concat(w,"-handle")},s&&i.createElement(v.Z,{className:"".concat(w,"-loading-icon")})),P=l()((t={},(0,r.Z)(t,"".concat(w,"-small"),"small"===(o||N)),(0,r.Z)(t,"".concat(w,"-loading"),s),(0,r.Z)(t,"".concat(w,"-rtl"),"rtl"===k),t),u);return i.createElement(h.Z,{insertExtraNode:!0},i.createElement(f,(0,a.Z)({},C,{prefixCls:w,className:P,disabled:p||s,ref:n,loadingIcon:j})))}));C.__ANT_SWITCH=!0,C.displayName="Switch";var x=C},10610:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var a=t(15861),r=t(87757),i=t.n(r),c=t(67294),o=t(12028),s=t(74071),l=t(91486),d=t(95828),u=t(60293),p=t(85893);function f(e){var n=(0,c.useState)(null),t=n[0],r=n[1],f=null,v=((0,c.useContext)(u.aC)||{}).setFieldInConfigState,h=e.apiPath,m=e.checked,g=e.reversed,y=void 0!==g&&g,b=e.configPath,C=void 0===b?"":b,x=e.disabled,Z=void 0!==x&&x,k=e.fieldName,N=e.label,w=e.tip,j=e.useSubmit,P=e.onChange,E=function(){r(null),clearTimeout(f),f=null},O=function(){var e=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=6;break}return r((0,s.kg)(s.Jk)),t=y?!n:n,e.next=5,(0,d.Si)({apiPath:h,data:{value:t},onSuccess:function(){v({fieldName:k,value:t,path:C}),r((0,s.kg)(s.zv))},onError:function(e){r((0,s.kg)(s.Un,"There was an error: ".concat(e)))}});case 5:f=setTimeout(E,d.sI);case 6:P&&P(n);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I=null!==t&&t.type===s.Jk;return(0,p.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[N&&(0,p.jsx)("div",{className:"label-side",children:(0,p.jsx)("span",{className:"formfield-label",children:N})}),(0,p.jsxs)("div",{className:"input-side",children:[(0,p.jsxs)("div",{className:"input-group",children:[(0,p.jsx)(o.Z,{className:"switch field-".concat(k),loading:I,onChange:O,defaultChecked:m,checked:m,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:Z}),(0,p.jsx)(l.Z,{status:t})]}),(0,p.jsx)("p",{className:"field-tip",children:w})]})]})}f.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},47170:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return P}});var a=t(4525),r=t(67294),i=t(15861),c=t(4942),o=t(87757),s=t.n(o),l=t(27279),d=t(71577),u=t(94184),p=t.n(u),f=t(60293),v=t(45197),h=t(95828),m=t(74071),g=t(60764),y=t(91486),b=t(31820),C=t(10610),x=t(85893);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var N=l.Z.Panel;function w(){var e=(0,r.useState)(null),n=e[0],t=e[1],a=(0,r.useState)(null),o=a[0],u=a[1],Z=(0,r.useState)(!1),w=Z[0],j=Z[1],P=(0,r.useContext)(f.aC)||{},E=P.serverConfig,O=P.setFieldInConfigState,I=(0,r.useContext)(v.k).setMessage,S=E.s3,K=S.accessKey,_=void 0===K?"":K,A=S.acl,T=void 0===A?"":A,z=S.bucket,D=void 0===z?"":z,R=S.enabled,F=void 0!==R&&R,M=S.endpoint,U=void 0===M?"":M,J=S.region,L=void 0===J?"":J,H=S.secret,X=void 0===H?"":H,G=S.servingEndpoint,V=void 0===G?"":G;if((0,r.useEffect)((function(){t({accessKey:_,acl:T,bucket:D,enabled:F,endpoint:U,region:L,secret:X,servingEndpoint:V}),j(F)}),[S]),!n)return null;var W=null,$=function(){u(null),W=null,clearTimeout(W)},q=function(e){var a=e.fieldName,r=e.value;t(k(k({},n),{},(0,c.Z)({},a,r)))},B=function(){var e=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((0,m.kg)(m.Jk)),t=n,e.next=4,(0,h.Si)({apiPath:h.$w,data:{value:t},onSuccess:function(){O({fieldName:"s3",value:t,path:""}),u((0,m.kg)(m.zv,"Updated.")),W=setTimeout($,h.sI),I("Changing your storage configuration will take place the next time you start a new stream.")},onError:function(e){u((0,m.kg)(m.Un,e)),W=setTimeout($,h.sI)}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=p()({"edit-storage-container":!0,"form-module":!0,enabled:w}),Y=function(e,n){var t=e.endpoint,a=e.accessKey,r=e.secret,i=e.bucket,c=e.region,o=e.enabled,s=e.servingEndpoint,l=e.acl;if(o){if(t&&(0,b.Z)(t)&&a&&r&&i&&c&&(o!==n.enabled||t!==n.endpoint||a!==n.accessKey||r!==n.secret||c!==n.region||!n.servingEndpoint&&""!==s||n.servingEndpoint&&s!==n.servingEndpoint||!n.acl&&""!==l||n.acl&&l!==n.acl))return!0}else if(o!==n.enabled)return!0;return!1}(n,S);return(0,x.jsxs)("div",{className:Q,children:[(0,x.jsx)("div",{className:"enable-switch",children:(0,x.jsx)(C.Z,{apiPath:"",fieldName:"enabled",label:"Storage Enabled",checked:n.enabled,onChange:function(e){j(e),q({fieldName:"enabled",value:e})}})}),(0,x.jsxs)("div",{className:"form-fields",children:[(0,x.jsx)("div",{className:"field-container",children:(0,x.jsx)(g.ZP,k(k({},h.zm.endpoint),{},{value:n.endpoint,onChange:q}))}),(0,x.jsx)("div",{className:"field-container",children:(0,x.jsx)(g.ZP,k(k({},h.zm.accessKey),{},{value:n.accessKey,onChange:q}))}),(0,x.jsx)("div",{className:"field-container",children:(0,x.jsx)(g.ZP,k(k({},h.zm.secret),{},{value:n.secret,onChange:q}))}),(0,x.jsx)("div",{className:"field-container",children:(0,x.jsx)(g.ZP,k(k({},h.zm.bucket),{},{value:n.bucket,onChange:q}))}),(0,x.jsx)("div",{className:"field-container",children:(0,x.jsx)(g.ZP,k(k({},h.zm.region),{},{value:n.region,onChange:q}))}),(0,x.jsx)(l.Z,{className:"advanced-section",children:(0,x.jsxs)(N,{header:"Optional Settings",children:[(0,x.jsx)("div",{className:"field-container",children:(0,x.jsx)(g.ZP,k(k({},h.zm.acl),{},{value:n.acl,onChange:q}))}),(0,x.jsx)("div",{className:"field-container",children:(0,x.jsx)(g.ZP,k(k({},h.zm.servingEndpoint),{},{value:n.servingEndpoint,onChange:q}))})]},"1")})]}),(0,x.jsxs)("div",{className:"button-container",children:[(0,x.jsx)(d.Z,{type:"primary",onClick:B,disabled:!Y,children:"Save"}),(0,x.jsx)(y.Z,{status:o})]})]})}var j=a.Z.Title;function P(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(j,{children:"Storage"}),(0,x.jsxs)("p",{className:"description",children:["Owncast supports optionally using external storage providers to distribute your video. Learn more about this by visiting our"," ",(0,x.jsx)("a",{href:"https://owncast.online/docs/storage/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Storage Documentation"}),"."]}),(0,x.jsx)("p",{className:"description",children:"Configuring this incorrectly will likely cause your video to be unplayable. Double check the documentation for your storage provider on how to configure the bucket you created for Owncast."}),(0,x.jsx)(w,{})]})}},11165:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/config-storage",function(){return t(47170)}])}},function(e){e.O(0,[774,888,179],(function(){return n=11165,e(e.s=n);var n}));var n=e.O();_N_E=n}]);